! $Id:$
! $Date:$
! $Revision:$
no ip access-list edge_inbound_v4
ip access-list edge_inbound_v4
 remark $Id:$
 remark Server network ingress ACL to be applied to gateway vlan interface


 remark accept-icmp
 remark allow inbound ICMP from any source.
 permit icmp any any 0
 permit icmp any any 8


 remark accept-traceroute
 remark allow inbound traceroute from any source.
 permit udp any any range 33434 33534


 remark accept-dhcp
 remark Optional - allow forwarding of DHCP requests.
 permit udp any any eq bootps
 permit udp any any eq bootpc


 remark accept-to-dns
 remark Allow name resolution
 permit udp 172.168.98.0/24 eq domain any
 permit udp 172.168.99.0/24 eq domain any
 permit udp 200.200.99.0/24 eq domain any


 remark accept-to-splunk
 remark Allow splunk telemetry
 permit tcp 172.168.98.0/24 200.200.101.0/24 eq 8000
 permit tcp 172.168.98.0/24 200.200.101.0/24 eq 8080
 permit tcp 172.168.98.0/24 200.200.101.0/24 eq 8089
 permit tcp 172.168.98.0/24 200.200.101.0/24 eq 9100
 permit tcp 172.168.99.0/24 200.200.101.0/24 eq 8000
 permit tcp 172.168.99.0/24 200.200.101.0/24 eq 8080
 permit tcp 172.168.99.0/24 200.200.101.0/24 eq 8089
 permit tcp 172.168.99.0/24 200.200.101.0/24 eq 9100
 permit tcp 200.200.99.0/24 200.200.101.0/24 eq 8000
 permit tcp 200.200.99.0/24 200.200.101.0/24 eq 8080
 permit tcp 200.200.99.0/24 200.200.101.0/24 eq 8089
 permit tcp 200.200.99.0/24 200.200.101.0/24 eq 9100


 remark accept-to-prometheus
 remark Allow splunk telemetry
 permit tcp 172.168.98.0/24 200.200.102.0/24 eq 9091
 permit tcp 172.168.99.0/24 200.200.102.0/24 eq 9091
 permit tcp 200.200.99.0/24 200.200.102.0/24 eq 9091


 remark accept-to-gnmi
 remark Allow splunk telemetry
 permit tcp 172.168.98.0/24 200.200.103.0/24 eq 9339
 permit tcp 172.168.99.0/24 200.200.103.0/24 eq 9339
 permit tcp 200.200.99.0/24 200.200.103.0/24 eq 9339


 remark accept-tcp-replies
 remark Allow tcp replies to internal hosts.
 permit tcp 172.168.98.0/24 any established
 permit tcp 172.168.99.0/24 any established
 permit tcp 200.200.99.0/24 any established


 remark deny-to-internal
 remark Deny access to rfc1918/internal.
 deny ip any 10.0.0.0/8
 deny ip any 172.16.0.0/12
 deny ip any 192.168.0.0/16


 remark deny-to-bogons
 remark Deny access to bogons
 deny ip any 0.0.0.0/8
 deny ip any 192.0.0.0/24
 deny ip any 192.0.2.0/24
 deny ip any 198.18.0.0/15
 deny ip any 198.51.100.0/24
 deny ip any 203.0.113.0/24
 deny ip any 224.0.0.0/4
 deny ip any 240.0.0.0/4


 remark default-permit
 remark Allow what's left (internet)
 permit ip any any

exit

no ipv6 access-list edge_inbound_v6
ipv6 access-list edge_inbound_v6
 remark $Id:$
 remark Server network ingress ACL to be applied to gateway vlan interface


 remark accept-traceroute
 remark allow inbound traceroute from any source.
 permit udp any any range 33434 33534


 remark accept-dhcp
 remark Optional - allow forwarding of DHCP requests.
 permit udp any any eq bootps
 permit udp any any eq bootpc


 remark deny-to-bogons
 remark Deny access to bogons
 deny ipv6 any 2001:db8::/32
 deny ipv6 any 3ffe::/16
 deny ipv6 any 5f00::/8
 deny ipv6 any ff00::/8


 remark default-permit
 remark Allow what's left (internet)
 permit ipv6 any any

exit
